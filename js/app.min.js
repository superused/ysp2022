location.href.indexOf("#")<0?AOS.init({duration:800,easing:"slide",once:!0}):AOS.init({disable:!0}),$(function(){"use strict";const t=function(){this.siteMenuClone(),this.siteCarousel(),this.siteStellar(),this.initTopView(),this.senryuView(),this.photoView(),this.contestVote(),this.imageFull(),this.footerBanner(),this.moveRecaptcha(),this.senryu100Data(),this.photo100Data(),this.slideShow(),this.liveTimeSchedule()};t.prototype={siteMenuClone:function(){$(".js-clone-nav").each(function(){$(this).clone().attr("class","site-nav-wrap").prependTo(".site-mobile-menu-body")}),setTimeout(function(){let t=0;$(".site-mobile-menu .has-children").each(function(){const o=$(this);o.prepend('<span class="arrow-collapse collapsed">'),o.find(".arrow-collapse").attr({"data-toggle":"collapse","data-target":"#collapseItem"+t}).css({display:"none"}),o.find("> ul").attr({class:"collapse show",id:"collapseItem"+t}),t++})},1e3),$("body").on("click",".site-mobile-menu .inpage-link",function(){$("body").hasClass("offcanvas-menu")&&$("body").removeClass("offcanvas-menu")}),$("body").on("click","li.has-children a",function(){$(this).closest("li").find(".arrow-collapse").click()}),$(window).resize(function(){$(this).width()>768&&$("body").hasClass("offcanvas-menu")&&$("body").removeClass("offcanvas-menu")}),$("body").on("click",".js-menu-toggle",function(t){const o=$(this);t.preventDefault(),$("body").hasClass("offcanvas-menu")?($("body").removeClass("offcanvas-menu"),o.removeClass("active")):($("body").addClass("offcanvas-menu"),o.addClass("active"))}),$(document).on("mouseup","html",function(t){const o=$(".site-mobile-menu");o.is(t.target)||0!==o.has(t.target).length||$("body").hasClass("offcanvas-menu")&&$("body").removeClass("offcanvas-menu")}),$(document).on("click","a[href*=#]:not([href=#])",function(){AOS.init({disable:!0});const t=-$(".site-navbar").height(),o=$(this).attr("href"),e=$("#"==o||""==o?"html":"#"+o.split("#").pop());if(e[0]){const o=e.offset().top+t;return $("body,html").animate({scrollTop:o},1e3,"swing"),!1}return!0})},siteCarousel:function(){const t=$(".owl-carousel");if(t.length>0){let o={768:{items:2},992:{items:3},1200:{items:4}};t.hasClass("short")&&(o[768]={items:1.5},o[992]={items:1.5},o[1200]={items:2}),t.owlCarousel({center:!0,items:1.5,itemsScaleUp:!1,loop:!0,margin:0,nav:!1,dots:!1,responsive:o}),$(".custom-btn.prev").click(function(){t.trigger("prev.owl.carousel")}),$(".custom-btn.next").click(function(){t.trigger("next.owl.carousel")}),setTimeout(function(){const t=function(){let t;const o=$(".owl-item img");o.each(function(){const o=$(this).height();(!t||t>o)&&(t=o)}),o.each(function(){const o=$(this),e=o.width(),n=o.height();o.width(e*t/n).height(t)})};t();let o=0;$(window).resize(function(){o++;const e=$(".owl-item:first").width();let n=0;const i=function(s){setTimeout(function(){if(++n<100&&s==o){const o=$(".owl-item:first").width();e==o?i(s):($(".owl-item img").each(function(){const t=$(this),e=t.width(),n=t.height();t.width(o).height(n*o/e)}),t())}},100)};i(o)})})}},siteStellar:function(){$(window).stellar({responsive:!0,parallaxBackgrounds:!0,parallaxElements:!0,horizontalScrolling:!1,hideDistantElements:!1,scrollProperty:"scroll"})},initTopView:function(){if($(".site-blocks-cover.overlay.top")[0]){const t=[["top_mobile1_s.jpg","top_mobile2_s.jpg","top_mobile3_s.jpg"],"moyou_top.png","moyou_bottom.png"],o=[["top_pc1.jpg","top_pc2.jpg","top_pc3.jpg"],"moyou_tb_top.png","moyou_tb_bottom.png"],e=[["top_pc1.jpg","top_pc2.jpg","top_pc3.jpg"],"moyou_pc_top.png","moyou_pc_bottom.png"],n=[$(".site-blocks-cover.overlay.bg"),$(".site-blocks-cover.overlay.top2"),$(".site-blocks-cover.overlay.top3")];let i=[],s=1,a=null;const c=function(){const t=$(this);t.closest(".logo_bg").css("height",t.height())},l=function(){const l=$(window),r=l.width(),d=l.height(),h=d/r,u=$(".site-blocks-cover.overlay.top");$(".logo_bg img").each(c);let f=1,p=!1;if(.67<=h&&h<=1.33?(i.length&&2==s||(p=!0),s=2,u.height(f>h?r*f:d)):r<d?(i.length&&1==s||(p=!0),s=1,f=1.5,u.height(f>h?d:r*f)):(i.length&&3==s||(p=!0),s=3,f=2560/3840,u.height(f>h?r*f:d)),u.find(".container .row").css("margin-top",.35*d+"px"),p){let c;i=1==s?t:2==s?o:e;for(const t in i){let o=i[t];Array.isArray(o)&&(o=o[c=Math.floor(Math.random()*o.length)]);const e=n[t].css("background-image").split('"');e[1]=e[1].split("/").slice(0,-1).concat(o).join("/"),n[t].css("background-image",e.join('"'))}a&&(clearInterval(a),a=null),a=setInterval(function(){c=c==i[0].length-1?0:c+1;const t=i[0][c],o=$(".site-blocks-cover.overlay.bg").last(),e=o.css("background-image").split('"'),n=o.css("opacity",1).clone();o.after(n),e[1]=e[1].split("/").slice(0,-1).concat(t).join("/"),n.css("background-image",e.join('"')).hide(),n.show("fade",{},2e3,function(){$(".site-blocks-cover.overlay.bg").first().remove()})},8e3)}};$(window).on("resize",l),l();const r=500,d=5*r;(function(){for(const t in n)n[t].addClass("show");setTimeout(function(){$(".top2").show("fade",{},r),$("#logo_1").show("blind",{direction:"horizontal"},r,c),setTimeout(function(){$(".top3").show("fade",{},r),$("#logo_3,#logo_4").show("blind",{direction:"horizontal"},r,c)},r),$("#logo_2").show("fade",{},2*r,c)},d)})()}else{const t=$(".site-mobile-menu").next(),o=$(".site-navbar").height();t.css("padding-top",o+"px").show();const e=$("#adjust-live-detail");if(e[0]){const t=function(){e.css("padding-top",$(".site-section.live-detail").outerHeight()+"px")};$(window).resize(t),t()}const n=$(".other-live");if(n[0]){const t=function(){$(window).outerWidth()>=768?n.css("height",$(".site-section.live-detail").outerHeight()+"px"):n.css("height","")};$(window).resize(t),t()}}},contestView:function(){const t=$("#fixed-menu");if(!$("#modal")[0]||!$("#fixed-menu-move")[0])return!1;const o=t.clone();return t.remove(),$("#fixed-menu-move").html(o),!0},senryuView:function(){if(!$(".kakejiku_button")[0])return!1;this.contestView(),$(".kakejiku .detail").click(function(){const t=$(this).parents("[data-type=content-block]"),o=t.find("button.vote"),e=$("#modal"),n=[".kakejiku_inner",".kakejiku_episode",".kakejiku_name"];for(const o in n){const i=n[o];e.find(i).html(t.find(i).html())}const i=e.find("button.vote");i.attr("data-vote",o.data("vote")),o.prop("disabled")?i.prop("disabled",!0).html("投票済"):i.prop("disabled",!1).html("投票"),e.find("#index").val($(".kakejiku button.detail").index(t.find("button.detail")))})},photoView:function(){if(!$(".photo_button")[0])return!1;this.contestView(),$(document).on("click","[data-type=content-block] [data-toggle=modal]",function(){const t=$(this).parents("[data-type=content-block]"),o=t.find("button.vote"),e=$("#modal"),n=[".photo_title",".photo_name",".photo_image",".photo_episode"];for(const o in n){const i=n[o];if(".photo_image"!=i)e.find(i).html(t.find(i).html());else{const o=t.find(i).attr("src");o?e.find(i).attr("src",o):e.find(i).attr("src",t.find(i).html())}}const i=e.find("button.vote");i.attr("data-vote",o.attr("data-vote")),o.prop("disabled")?i.prop("disabled",!0).html("投票済"):i.prop("disabled",!1).html("投票")})},contestVote:function(){const t=$("#tohyo");if(t[0]&&$("button.vote")[0]){let o=!1;$("button.vote").each(function(){const e=$(this).attr("data-vote"),n=t.find("div.wp-polls#polls-"+e);n[0]&&n.find("input[type=button][name=vote]")[0]?o=!0:$(this).prop("disabled",!0).text("投票済")}),o&&$("button.vote").on("click",function(o){const e=$(this).attr("data-vote"),n=t.find("div.wp-polls#polls-"+e),i=n.find("input[type=radio]").first();return i[0]&&(i.prop("checked",!0),n.find("input[type=button][name=vote]").click(),$("button.vote[data-vote="+e+"]").each(function(){const t=$(this);t.prop("disabled",!0).text("投票済");const o=t.closest("[data-type=content-block]");if(o[0]){const t=o.find(".vote_num"),e=parseInt(t.html());t.html(e+1)}})),!1})}},imageFull:function(){const t=$(".site-navbar"),o=$(".top-image.full .top-full-image");if(!o[0])return;const e=function(){const e=$(window);e.outerWidth()<768?(o.outerWidth(e.outerWidth()),o.height(e.height()-t.height())):o.css({width:"",height:""})};$(window).on("resize",e),e()},footerBanner:function(){const t=$(".footer-banner .close-btn");t[0]&&t.on("click",function(){$(".footer-banner").hide()})},projectBuruburu:function(){const t=function(t,o){let e;if(t.endsWith("#project")?e=$("#project"):t.endsWith("#live")?e=$("#live"):t.endsWith("#contest")?e=$("#contest"):t.endsWith("#contents-list")?e=$("#contents-list"):t.endsWith("#senryu")?e=$("#senryu"):t.endsWith("#photo")?e=$("#photo"):t.endsWith("#movie")&&(e=$("#movie")),e&&e[0]){const t=$(".site-navbar").height();e.offset().top;e.removeAttr("data-aos data-aos-delay").removeClass("aos-unit aos-animate"),setTimeout(function(){const o=e,n=(parseInt($(window).scrollTop()),parseInt(o.offset().top));$("body").css("overflow","hidden"),$(window).scrollTop(n-t),o.addClass("buruburu"),setTimeout(function(){o.removeClass("buruburu"),$("body").css("overflow","")},700)},o)}};$(document).on("click","[href$=#project], [href$=#live], [href$=#contest], [href$=#contents-list], [href$=#senryu], [href$=#photo], [href$=#movie]",function(){t($(this).attr("href"),0)}),$(document).ready(function(){setTimeout(function(){t(location.href,0)},300)})},adjustRecaptcha:function(){const t=$(".grecaptcha-badge"),o=$(".fixed-menu"),e=$(".fixed-button-content").last();t[0]&&(t.css("visibility","visible"),"none"!==o.css("display")?t.css("bottom",e.height()+30+"px"):t.css("bottom","14px"))},moveRecaptcha:function(){if($(".contact-form")[0]&&$(".sidebar")[0]){const t=this;$(window).resize(t.adjustRecaptcha),setTimeout(t.adjustRecaptcha,700)}},senryu100Data:function(){const t=$(".senryu-100-data"),o=$(".json-data");if(t[0]&&o[0]){let e=0,n=0;const i=10,s=t.parent(),a=JSON.parse(o.html()),c=function(){for(const o in a){if(n>=i)break;if(0!=e&&o!=e+1)continue;const c=t.first().clone().removeClass("d-none");c.find(".ranking").html(o),c.find(".senryu").html(a[o][0]),c.find(".senryu-name").html(a[o][1]+" ("+a[o][2]+")"),s.append(c),e=parseInt(o),n++}n=0,e>=100&&$("#add-ranking").remove()};$(document).on("click","#add-ranking",c),c()}},photo100Data:function(){const t=$(".photo-100-data"),o=$(".json-data");if(t[0]&&o[0]){let e=0,n=0;const i=70,s=t.parent(),a=JSON.parse(o.html());(function(){for(const o in a){if(n>=i)break;if(0!=e&&o!=e+1)continue;const c=t.first().clone().removeClass("d-none");c.find(".ranking").html(o),c.find(".photo_image").html(a[o][0]);let l=a[o][0].split("."),r="-150x150."+l.pop();c.find(".photo_thumbnail").attr("src",l.join(".")+r),c.find(".photo_title").html(a[o][1]),c.find(".photo_name").html(a[o][2]),c.find(".photo_episode").html(a[o][3]),s.append(c),e=parseInt(o),n++}n=0})()}},slideShow:function(){const t=$(".slide-show");if(t[0]){const o=t.find(".slide-image");let e=Math.floor(Math.random()*o.length);o.eq(e).show();setInterval(function(){const t=o.eq(e);e=e==o.length-1?0:e+1;const n=o.eq(e);t.css("z-index",0),n.css("z-index",1),n.show("fade",{},2e3,function(){t.css("display","")})},8e3)}},liveTimeSchedule:function(){let t="20210807";const o=this.getToday8num();"20210808"==o?t="20210808":"20210809"==o&&(t="20210809");const e=function(){$(this)[0]&&(t=$(this).attr("data-date")),$("[data-date]").each(function(){var o=$(this);o.attr("data-date")==t?"BUTTON"==o.prop("tagName")?o.addClass("active"):o.show():"BUTTON"==o.prop("tagName")?o.removeClass("active"):o.parents(".live-detail-timetable")[0]?o.show():o.hide()})};$(document).on("click","button[data-date]",e),e()},getToday8num:function(){const t=new Date;return parseInt(t.getFullYear()+("0"+(t.getMonth()+1)).slice(-2)+("0"+t.getDate()).slice(-2))}};new t});
